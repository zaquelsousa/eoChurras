services:
  #esse db eo que o docker usa pra "Linkar" as paradasd entao tem que passar ela na string de concexzao dessa porra
  db:
    image: mariadb:11
    restart: always
    environment:
      MARIADB_USER: ${MARIADB_USER}
      MARIADB_PASSWORD: ${MARIADB_PASSWORD}
      MARIADB_ROOT_PASSWORD: ${MARIADB_ROOT_PASSWORD}
      MARIADB_DATABASE: ${MARIADB_DATABASE}
    ports:
      - "3306:3306"
    # porra go precosse do carai se para que vale a pena fazer o go esperar o mariadb iniciar


  backend:
    build: ./backend
    #redireciona a porta do conteiner para do meu pc
    ports:
      - "8081:8081"
    depends_on:
      - db
    
  nginx:
    image: nginx:alpine
    ports:
      - "8080:8080"
    volumes:
      - ./frontend:/usr/share/nginx/html
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./nginx/mime.types:/etc/nginx/mime.types:ro
    depends_on:
      - backend
